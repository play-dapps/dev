"use strict";import{jsPanel}from"../../jspanel.min.js";jsPanel.calendar||(jsPanel.calendar={version:"0.1.0",date:"2019-06-06 18:30",defaults:{locale:"de",months:1,showWeekNumbers:!0,ondateselect:void 0},keyValue:void 0,weekcount:[6,10,14],daycount:[43,71,99],generateHTML(e){let a=document.createElement("div");a.className="jsPanel-cal-wrapper",a.innerHTML='<div class="jsPanel-cal-sub jsPanel-cal-blank1"></div>\n                <div class="jsPanel-cal-sub jsPanel-cal-back">&#9204;</div>\n                <div class="jsPanel-cal-sub jsPanel-cal-month"></div>\n                <div class="jsPanel-cal-sub jsPanel-cal-forward">&#9205;</div>\n                <div class="jsPanel-cal-sub jsPanel-cal-reset">&#8634;</div>\n                <div class="jsPanel-cal-sub jsPanel-cal-blank3"></div>';for(let e=0;e<7;e++)a.innerHTML+=`<div class="jsPanel-cal-sub day-name day-name-${e}"></div>`;for(let t=0;t<this.weekcount[e.months-1];t++)a.innerHTML+=`<div class="jsPanel-cal-sub week week-${t}"></div>`;for(let t=1;t<this.daycount[e.months-1];t++)a.innerHTML+=`<div class="jsPanel-cal-sub day day-${t}"></div>`;return a},unselectAllDays(e){e.querySelectorAll(".jsPanel-cal-sub.day").forEach(e=>{e.classList.remove("selected")})},create(e,a={}){let t=a;a.config&&delete(t=Object.assign({},a.config,a)).config,((t=Object.assign({},this.defaults,t)).months<1||t.months>3)&&(t.months=1),e.fill=(a=>{let l=a||moment();l.locale(t.locale);let s=l.month(),n=l.date(1).weekday(),d=l.localeData(),c=e.querySelector(".jsPanel-cal-month");c.innerHTML=l.format("MMMM YYYY"),c.dataset.date=l.format("YYYY-MM-DD");let o=e.querySelectorAll(".jsPanel-cal-sub.day-name"),r=d.weekdaysMin();if(1===d.firstDayOfWeek()){for(let e=0,a=1;e<7;e++,a++)o[e].textContent=r[a];o[6].textContent=r[0],o[5].classList.add("weekend"),o[6].classList.add("weekend")}else{for(let e=0;e<7;e++)o[e].textContent=r[e];o[0].classList.add("weekend"),o[6].classList.add("weekend")}let i=l.subtract(++n,"days");e.querySelectorAll(".jsPanel-cal-sub.day").forEach(e=>{e.classList.remove("today","notInMonth");let a=i.add(1,"days");e.textContent=a.format("D"),e.dataset.date=l.format("YYYY-MM-DD"),a.month()!==s?e.classList.add("notInMonth"):e.dataset.date===moment().format("YYYY-MM-DD")&&e.classList.add("today")}),t.showWeekNumbers?e.querySelectorAll(".jsPanel-cal-sub.week").forEach((a,t)=>{a.textContent=moment(e.querySelector(`.jsPanel-cal-sub.day-${7*(t+1)}`).dataset.date).week()}):e.querySelector(".jsPanel-cal-wrapper").style.gridTemplateColumns="0fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr"});let l=this.generateHTML(t);l.classList.add(`month-count-${t.months}`),e.append(l),e.fill();let s=e.querySelector(".jsPanel-cal-sub.jsPanel-cal-month");return jsPanel.pointerdown.forEach(a=>{e.querySelector(".jsPanel-cal-sub.jsPanel-cal-back").addEventListener(a,a=>{a.preventDefault();let t=jsPanel.calendar.keyValue||1;e.fill(moment(s.dataset.date).subtract(t,"months"))},!1)}),jsPanel.pointerdown.forEach(a=>{e.querySelector(".jsPanel-cal-sub.jsPanel-cal-forward").addEventListener(a,a=>{a.preventDefault();let t=jsPanel.calendar.keyValue||1;e.fill(moment(s.dataset.date).add(t,"months"))},!1)}),jsPanel.pointerdown.forEach(a=>{e.querySelector(".jsPanel-cal-sub.jsPanel-cal-reset").addEventListener(a,a=>{a.preventDefault(),e.fill(moment())},!1)}),jsPanel.pointerdown.forEach(e=>{l.addEventListener(e,e=>{const a=e.target,s=e.altKey,n=e.ctrlKey,d=e.shiftKey;if(e.preventDefault(),a.classList.contains("day")){let c=a.dataset.date;if(n||d||s||jsPanel.calendar.unselectAllDays(l),t.ondateselect&&"function"==typeof t.ondateselect){let a=moment(c);t.ondateselect.call(a,a,e)}}},!1)}),e}},document.addEventListener("keydown",e=>{e.key.match(/^[2-9]$/)?jsPanel.calendar.keyValue=e.key:e.key.match(/^1$/)&&(jsPanel.calendar.keyValue=12)}),document.addEventListener("keyup",()=>{jsPanel.calendar.keyValue=void 0})),"undefined"!=typeof module&&(module.exports=jsPanel);